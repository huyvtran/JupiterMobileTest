<!--
  Generated template for the Komunikacija page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
	<js-header title="Komunikacija" [showClose]="true" [showFavorite]="true"></js-header>
	<ion-toolbar no-border-top>
		<ion-segment [(ngModel)]="segment"  (ionChange)="getSegmentData()">
			<ion-segment-button value="donos">
				Donos podataka
			</ion-segment-button>
			<ion-segment-button value="slanje">
				Slanje podataka
			</ion-segment-button>
		</ion-segment>
	</ion-toolbar>

</ion-header>

<ion-content>

	<!-- <ion-refresher (ionRefresh)="syncData($event)">
		<ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Povuci za osvježavanje" refreshingSpinner="circles" refreshingText={{text}}>
		</ion-refresher-content>
	</ion-refresher> -->

	<div [ngSwitch]="segment">
		<div *ngSwitchCase="'donos'">

			<ion-row justify-content-center *ngIf="syncActive===true">
				<ion-spinner name="circles"></ion-spinner>
			</ion-row>
			<ion-row justify-content-center *ngIf="syncActive===true">
				Osvježavam podatke...
			</ion-row>



			<div style="background:#fafafa; border-bottom:1px solid #e2e2e2;">
				<ion-toolbar>
					<ion-row>
						<ion-col>
							<ion-label [hidden]="syncDate == null">Podaci od: {{syncDate? (syncDate | date: 'dd.MM.yyyy HH:mm') : '...' }}</ion-label>
							<ion-label [hidden]="syncDate != null">Sinkronizirajte podatke </ion-label>

						</ion-col>
					</ion-row>
				</ion-toolbar>
			</div>



			<ion-list>
				<ion-item>
					<ion-label>Roba</ion-label>
					<ion-note item-right>{{sifarniciService.RobaCnt}}</ion-note>
				</ion-item>
				<ion-item>
					<ion-label>Partneri</ion-label>
					<ion-note item-right>{{sifarniciService.PartneriCnt}}</ion-note>
				</ion-item>
				<ion-item>
					<ion-label>Rute</ion-label>
					<ion-note item-right>{{sifarniciService.RuteCnt}}</ion-note>
				</ion-item>
				<ion-item>
					<ion-label>Klase</ion-label>
					<ion-note item-right>{{sifarniciService.KlaseCnt}}</ion-note>
				</ion-item>
				<ion-item>
					<ion-label>Nacin placanja</ion-label>
					<ion-note item-right>{{sifarniciService.NacinPlaCnt}}</ion-note>
				</ion-item>
				<ion-item>
					<ion-label>Narudžbe</ion-label>
					<ion-note item-right>{{sifarniciService.NarudzbeCnt}}</ion-note>
				</ion-item>
				<ion-item>
					<ion-label>Vrsta dokumenta</ion-label>
					<ion-note item-right>{{sifarniciService.VrstaDokCnt}}</ion-note>
				</ion-item>
			</ion-list>


			<ion-footer>
				<div style="margin:8px">
					<button ion-button full color="light" style="border: 1px solid #ccc" (click)="syncWithButton()">Sinkroniziraj podatke</button>
				</div>
			</ion-footer>
		</div>
		<div *ngSwitchCase="'slanje'">

			<ion-list>
				
				<div style="background:#fafafa; border-bottom:1px solid #e2e2e2;">
					<ion-toolbar>
						<ion-row>
								<ion-label>Neposlanih dokumenata: {{ this.narudzbeService.NeposlaneNarudzbeCnt }}</ion-label>
						</ion-row>
						<ion-row>
								<ion-label>Uspješno poslanih dokumenata: {{successCnt }}</ion-label>
						</ion-row>
						<ion-row>
								<ion-label>Neuspješno poslanih dokumenata: {{ errorCnt }}</ion-label>
						</ion-row>
					</ion-toolbar>
				</div>

				<ion-row justify-content-center *ngIf="syncActiveSlanje===true">
					<ion-spinner name="circles"></ion-spinner>
				</ion-row>
				<ion-row justify-content-center *ngIf="syncActiveSlanje===true">
					Šaljem podatke...
				</ion-row>

				
				<ion-footer>
					<div style="margin:8px">
						<button ion-button full color="light" style="border: 1px solid #ccc" (click)="sendDocuments()">Pošalji dokumente</button>
					</div>
				</ion-footer>
			</ion-list>
		</div>

	</div>

</ion-content>